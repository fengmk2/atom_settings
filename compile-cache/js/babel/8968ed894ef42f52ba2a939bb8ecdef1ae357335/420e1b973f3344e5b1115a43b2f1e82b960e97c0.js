var DocsParser = require('../docsparser');
var xregexp = require('../xregexp').XRegExp;

function ObjCParser(settings) {
    DocsParser.call(this, settings);
}

ObjCParser.prototype = Object.create(DocsParser.prototype);

ObjCParser.prototype.setup_settings = function () {
    var identifier = '[a-zA-Z_$][a-zA-Z_$0-9]*';
    this.settings = {
        // curly brackets around the type information
        'curlyTypes': true,
        'typeInfo': true,
        'typeTag': 'type',
        // technically, they can contain all sorts of unicode, but w/e
        'varIdentifier': identifier,
        'fnIdentifier': identifier,
        'fnOpener': '^\\s*[-+]',
        'commentCloser': ' */',
        'bool': 'Boolean',
        'function': 'Function'
    };
};

ObjCParser.prototype.get_definition = function (editor, pos, read_line) {
    var maxLines = 25; // don't go further than this

    var definition = '';
    var i;
    for (i = 0; i < maxLines; i++) {
        var line = read_line(editor, pos);
        if (line == null) break;

        // goto next line
        pos.row += 1;
        // strip comments
        line = line.replace(/\/\/.*/, '');
        if (definition === '') {
            if (!this.settings.fnOpener || !(line.search(RegExp(this.settings.fnOpener)) > -1)) {
                definition = line;
                break;
            }
        }
        definition += line;
        if (line.indexOf(';') > -1 || line.indexOf('{') > -1) {
            var regex = new RegExp('\\s*[;{]\\s*$', 'g');
            definition = definition.replace(regex, '');
            break;
        }
    }
    return definition;
};

ObjCParser.prototype.parse_function = function (line) {
    // this is terrible, don't judge me
    var type_regex = '[a-zA-Z_$][a-zA-Z0-9_$]*\\s*\\**';
    var regex = xregexp('[-+]\\s+\\(\\s*(?P<retval>' + type_regex + ')\\s*\\)\\s*' + '(?P<name>[a-zA-Z_$][a-zA-Z0-9_$]*)' +
    // void fnName
    // (arg1, arg2)
    '\\s*(?::(?P<args>.*))?');

    var matches = xregexp.exec(line, regex);
    if (matches == null) return null;

    var name = matches.name;
    var arg_str = matches.args;
    var args = [];

    if (arg_str !== null) {
        regex = /\s*:\s*/g;
        var groups = arg_str.split(regex);
        var num_groups = groups.length;
        var i, len;
        for (i = 0; i < num_groups; i++) {
            var group = groups[i];
            if (i < num_groups - 1) {
                regex = /\s+(\S*)$/g;
                result = group.exec(regex);
                name += ':' + result[1];
                group = group.slice(0, result.index);
            }
            args.push(group);
        }
        if (num_groups) name += ':';
    }
    return [name, args.join('|||'), matches.retval];
};

ObjCParser.prototype.parse_args = function (args) {
    var out = [];
    var arg_list = args.split('|||');
    var i, len;
    for (i = 0; len = arg_list.length, i < len; i++) {
        var arg = arg_list[i];
        var last_paren = arg.lastIndexOf(')');
        out.push(arg.split(1, last_paren), arg.split(last_paren + 1));
    }
    return out;
};

ObjCParser.prototype.get_function_return_type = function (name, retval) {
    if (retval != 'void' && retval != 'IBAction') return retval;else return null;
};

ObjCParser.prototype.parse_var = function (line) {
    return null;
};

module.exports = ObjCParser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tazIvLmF0b20vcGFja2FnZXMvZG9jYmxvY2tyL2xpYi9sYW5ndWFnZXMvb2JqYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDMUMsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQzs7QUFFNUMsU0FBUyxVQUFVLENBQUMsUUFBUSxFQUFFO0FBQzFCLGNBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0NBQ25DOztBQUVELFVBQVUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRTNELFVBQVUsQ0FBQyxTQUFTLENBQUMsY0FBYyxHQUFHLFlBQVc7QUFDN0MsUUFBSSxVQUFVLEdBQUcsMEJBQTBCLENBQUM7QUFDNUMsUUFBSSxDQUFDLFFBQVEsR0FBRzs7QUFFWixvQkFBWSxFQUFFLElBQUk7QUFDbEIsa0JBQVUsRUFBRSxJQUFJO0FBQ2hCLGlCQUFTLEVBQUUsTUFBTTs7QUFFakIsdUJBQWUsRUFBRSxVQUFVO0FBQzNCLHNCQUFjLEVBQUcsVUFBVTtBQUMzQixrQkFBVSxFQUFFLFdBQVc7QUFDdkIsdUJBQWUsRUFBRSxLQUFLO0FBQ3RCLGNBQU0sRUFBRSxTQUFTO0FBQ2pCLGtCQUFVLEVBQUUsVUFBVTtLQUN6QixDQUFDO0NBQ0wsQ0FBQzs7QUFFRixVQUFVLENBQUMsU0FBUyxDQUFDLGNBQWMsR0FBRyxVQUFTLE1BQU0sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFO0FBQ25FLFFBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQzs7QUFFbEIsUUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLFFBQUksQ0FBQyxDQUFDO0FBQ04sU0FBSSxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDeEIsWUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNsQyxZQUFHLElBQUksSUFBSSxJQUFJLEVBQ1gsTUFBTTs7O0FBR1YsV0FBRyxDQUFDLEdBQUcsSUFBRyxDQUFDLENBQUM7O0FBRVosWUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xDLFlBQUcsVUFBVSxLQUFLLEVBQUUsRUFBRTtBQUNsQixnQkFBRyxBQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLElBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUEsQUFBQyxFQUFFO0FBQ2pGLDBCQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ2xCLHNCQUFNO2FBQ1Q7U0FDSjtBQUNELGtCQUFVLElBQUcsSUFBSSxDQUFDO0FBQ2xCLFlBQUcsQUFBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQUMsRUFBRTtBQUNyRCxnQkFBSSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzdDLHNCQUFVLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDM0Msa0JBQU07U0FDVDtLQUNKO0FBQ0QsV0FBTyxVQUFVLENBQUM7Q0FDckIsQ0FBQzs7QUFFRixVQUFVLENBQUMsU0FBUyxDQUFDLGNBQWMsR0FBRyxVQUFTLElBQUksRUFBRTs7QUFFakQsUUFBSSxVQUFVLEdBQUcsa0NBQWtDLENBQUM7QUFDcEQsUUFBSSxLQUFLLEdBQUcsT0FBTyxDQUNmLDRCQUE0QixHQUFHLFVBQVUsR0FBRyxjQUFjLEdBQzFELG9DQUFvQzs7O0FBR3BDLDRCQUF3QixDQUN2QixDQUFDOztBQUVOLFFBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3hDLFFBQUcsT0FBTyxJQUFJLElBQUksRUFDZCxPQUFPLElBQUksQ0FBQzs7QUFFaEIsUUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixRQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQzNCLFFBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQzs7QUFFZCxRQUFHLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFDakIsYUFBSyxHQUFHLFVBQVUsQ0FBQztBQUNuQixZQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xDLFlBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDL0IsWUFBSSxDQUFDLEVBQUMsR0FBRyxDQUFDO0FBQ1YsYUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDMUIsZ0JBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0QixnQkFBRyxDQUFDLEdBQUksVUFBVSxHQUFHLENBQUMsQUFBQyxFQUFFO0FBQ3JCLHFCQUFLLEdBQUcsWUFBWSxDQUFDO0FBQ3JCLHNCQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQixvQkFBSSxJQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkIscUJBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDeEM7QUFDRCxnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNwQjtBQUNELFlBQUcsVUFBVSxFQUNULElBQUksSUFBRyxHQUFHLENBQUM7S0FDbEI7QUFDRCxXQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBQ25ELENBQUM7O0FBRUYsVUFBVSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDN0MsUUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ2IsUUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNqQyxRQUFJLENBQUMsRUFBRSxHQUFHLENBQUM7QUFDWCxTQUFJLENBQUMsR0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUMxQyxZQUFJLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEIsWUFBSSxVQUFVLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN0QyxXQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDakU7QUFDRCxXQUFPLEdBQUcsQ0FBQztDQUNkLENBQUM7O0FBRUYsVUFBVSxDQUFDLFNBQVMsQ0FBQyx3QkFBd0IsR0FBRyxVQUFTLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDbkUsUUFBRyxBQUFDLE1BQU0sSUFBSSxNQUFNLElBQU0sTUFBTSxJQUFJLFVBQVUsQUFBQyxFQUMzQyxPQUFPLE1BQU0sQ0FBQyxLQUVkLE9BQU8sSUFBSSxDQUFDO0NBQ25CLENBQUM7O0FBRUYsVUFBVSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDNUMsV0FBTyxJQUFJLENBQUM7Q0FDZixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9tazIvLmF0b20vcGFja2FnZXMvZG9jYmxvY2tyL2xpYi9sYW5ndWFnZXMvb2JqYy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBEb2NzUGFyc2VyID0gcmVxdWlyZShcIi4uL2RvY3NwYXJzZXJcIik7XG52YXIgeHJlZ2V4cCA9IHJlcXVpcmUoJy4uL3hyZWdleHAnKS5YUmVnRXhwO1xuXG5mdW5jdGlvbiBPYmpDUGFyc2VyKHNldHRpbmdzKSB7XG4gICAgRG9jc1BhcnNlci5jYWxsKHRoaXMsIHNldHRpbmdzKTtcbn1cblxuT2JqQ1BhcnNlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKERvY3NQYXJzZXIucHJvdG90eXBlKTtcblxuT2JqQ1BhcnNlci5wcm90b3R5cGUuc2V0dXBfc2V0dGluZ3MgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaWRlbnRpZmllciA9ICdbYS16QS1aXyRdW2EtekEtWl8kMC05XSonO1xuICAgIHRoaXMuc2V0dGluZ3MgPSB7XG4gICAgICAgIC8vIGN1cmx5IGJyYWNrZXRzIGFyb3VuZCB0aGUgdHlwZSBpbmZvcm1hdGlvblxuICAgICAgICAnY3VybHlUeXBlcyc6IHRydWUsXG4gICAgICAgICd0eXBlSW5mbyc6IHRydWUsXG4gICAgICAgICd0eXBlVGFnJzogJ3R5cGUnLFxuICAgICAgICAvLyB0ZWNobmljYWxseSwgdGhleSBjYW4gY29udGFpbiBhbGwgc29ydHMgb2YgdW5pY29kZSwgYnV0IHcvZVxuICAgICAgICAndmFySWRlbnRpZmllcic6IGlkZW50aWZpZXIsXG4gICAgICAgICdmbklkZW50aWZpZXInOiAgaWRlbnRpZmllcixcbiAgICAgICAgJ2ZuT3BlbmVyJzogJ15cXFxccypbLStdJyxcbiAgICAgICAgJ2NvbW1lbnRDbG9zZXInOiAnICovJyxcbiAgICAgICAgJ2Jvb2wnOiAnQm9vbGVhbicsXG4gICAgICAgICdmdW5jdGlvbic6ICdGdW5jdGlvbidcbiAgICB9O1xufTtcblxuT2JqQ1BhcnNlci5wcm90b3R5cGUuZ2V0X2RlZmluaXRpb24gPSBmdW5jdGlvbihlZGl0b3IsIHBvcywgcmVhZF9saW5lKSB7XG4gICAgdmFyIG1heExpbmVzID0gMjU7ICAvLyBkb24ndCBnbyBmdXJ0aGVyIHRoYW4gdGhpc1xuXG4gICAgdmFyIGRlZmluaXRpb24gPSAnJztcbiAgICB2YXIgaTtcbiAgICBmb3IoaT0wOyBpIDwgbWF4TGluZXM7IGkrKykge1xuICAgICAgICB2YXIgbGluZSA9IHJlYWRfbGluZShlZGl0b3IsIHBvcyk7XG4gICAgICAgIGlmKGxpbmUgPT0gbnVsbClcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIGdvdG8gbmV4dCBsaW5lXG4gICAgICAgIHBvcy5yb3crPSAxO1xuICAgICAgICAvLyBzdHJpcCBjb21tZW50c1xuICAgICAgICBsaW5lID0gbGluZS5yZXBsYWNlKC9cXC9cXC8uKi8sICcnKTtcbiAgICAgICAgaWYoZGVmaW5pdGlvbiA9PT0gJycpIHtcbiAgICAgICAgICAgIGlmKCghdGhpcy5zZXR0aW5ncy5mbk9wZW5lcikgfHwgIShsaW5lLnNlYXJjaChSZWdFeHAodGhpcy5zZXR0aW5ncy5mbk9wZW5lcikpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbiA9IGxpbmU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVmaW5pdGlvbis9IGxpbmU7XG4gICAgICAgIGlmKChsaW5lLmluZGV4T2YoJzsnKSA+IC0xKSB8fCAobGluZS5pbmRleE9mKCd7JykgPiAtMSkpIHtcbiAgICAgICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ1xcXFxzKls7e11cXFxccyokJywgJ2cnKTtcbiAgICAgICAgICAgIGRlZmluaXRpb24gPSBkZWZpbml0aW9uLnJlcGxhY2UocmVnZXgsICcnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWZpbml0aW9uO1xufTtcblxuT2JqQ1BhcnNlci5wcm90b3R5cGUucGFyc2VfZnVuY3Rpb24gPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgLy8gdGhpcyBpcyB0ZXJyaWJsZSwgZG9uJ3QganVkZ2UgbWVcbiAgICB2YXIgdHlwZV9yZWdleCA9ICdbYS16QS1aXyRdW2EtekEtWjAtOV8kXSpcXFxccypcXFxcKionO1xuICAgIHZhciByZWdleCA9IHhyZWdleHAoXG4gICAgICAgICdbLStdXFxcXHMrXFxcXChcXFxccyooP1A8cmV0dmFsPicgKyB0eXBlX3JlZ2V4ICsgJylcXFxccypcXFxcKVxcXFxzKicgK1xuICAgICAgICAnKD9QPG5hbWU+W2EtekEtWl8kXVthLXpBLVowLTlfJF0qKScgK1xuICAgICAgICAvLyB2b2lkIGZuTmFtZVxuICAgICAgICAvLyAoYXJnMSwgYXJnMilcbiAgICAgICAgJ1xcXFxzKig/OjooP1A8YXJncz4uKikpPydcbiAgICAgICAgKTtcblxuICAgIHZhciBtYXRjaGVzID0geHJlZ2V4cC5leGVjKGxpbmUsIHJlZ2V4KTtcbiAgICBpZihtYXRjaGVzID09IG51bGwpXG4gICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgdmFyIG5hbWUgPSBtYXRjaGVzLm5hbWU7XG4gICAgdmFyIGFyZ19zdHIgPSBtYXRjaGVzLmFyZ3M7XG4gICAgdmFyIGFyZ3MgPSBbXTtcblxuICAgIGlmKGFyZ19zdHIgIT09IG51bGwpIHtcbiAgICAgICAgcmVnZXggPSAvXFxzKjpcXHMqL2c7XG4gICAgICAgIHZhciBncm91cHMgPSBhcmdfc3RyLnNwbGl0KHJlZ2V4KTtcbiAgICAgICAgdmFyIG51bV9ncm91cHMgPSBncm91cHMubGVuZ3RoO1xuICAgICAgICB2YXIgaSxsZW47XG4gICAgICAgIGZvcihpPTA7IGkgPCBudW1fZ3JvdXBzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGdyb3Vwc1tpXTtcbiAgICAgICAgICAgIGlmKGkgPCAobnVtX2dyb3VwcyAtIDEpKSB7XG4gICAgICAgICAgICAgICAgcmVnZXggPSAvXFxzKyhcXFMqKSQvZztcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBncm91cC5leGVjKHJlZ2V4KTtcbiAgICAgICAgICAgICAgICBuYW1lKz0gJzonICsgcmVzdWx0WzFdO1xuICAgICAgICAgICAgICAgIGdyb3VwID0gZ3JvdXAuc2xpY2UoMCwgcmVzdWx0LmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3MucHVzaChncm91cCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobnVtX2dyb3VwcylcbiAgICAgICAgICAgIG5hbWUrPSAnOic7XG4gICAgfVxuICAgIHJldHVybiBbbmFtZSwgYXJncy5qb2luKCd8fHwnKSwgbWF0Y2hlcy5yZXR2YWxdO1xufTtcblxuT2JqQ1BhcnNlci5wcm90b3R5cGUucGFyc2VfYXJncyA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgdmFyIGFyZ19saXN0ID0gYXJncy5zcGxpdCgnfHx8Jyk7XG4gICAgdmFyIGksIGxlbjtcbiAgICBmb3IoaT0wOyBsZW4gPSBhcmdfbGlzdC5sZW5ndGgsIGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgYXJnID0gYXJnX2xpc3RbaV07XG4gICAgICAgIHZhciBsYXN0X3BhcmVuID0gYXJnLmxhc3RJbmRleE9mKCcpJyk7XG4gICAgICAgIG91dC5wdXNoKGFyZy5zcGxpdCgxLCBsYXN0X3BhcmVuKSwgYXJnLnNwbGl0KGxhc3RfcGFyZW4gKyAxKSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuXG5PYmpDUGFyc2VyLnByb3RvdHlwZS5nZXRfZnVuY3Rpb25fcmV0dXJuX3R5cGUgPSBmdW5jdGlvbihuYW1lLCByZXR2YWwpIHtcbiAgICBpZigocmV0dmFsICE9ICd2b2lkJykgJiYgKHJldHZhbCAhPSAnSUJBY3Rpb24nKSlcbiAgICAgICAgcmV0dXJuIHJldHZhbDtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBudWxsO1xufTtcblxuT2JqQ1BhcnNlci5wcm90b3R5cGUucGFyc2VfdmFyID0gZnVuY3Rpb24obGluZSkge1xuICAgIHJldHVybiBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBPYmpDUGFyc2VyO1xuIl19